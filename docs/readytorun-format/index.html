
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://jurakovic.github.io/runtime/readytorun-format/">
      
      
        <link rel="prev" href="../r2r-perfmap-format/">
      
      
        <link rel="next" href="../shared-generics/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>ReadyToRun File Format - The Book of the Runtime</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#readytorun-file-format" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="The Book of the Runtime" class="md-header__button md-logo" aria-label="The Book of the Runtime" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Book of the Runtime
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ReadyToRun File Format
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jurakovic/runtime" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dotnet/runtime
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="The Book of the Runtime" class="md-nav__button md-logo" aria-label="The Book of the Runtime" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    The Book of the Runtime
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jurakovic/runtime" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dotnet/runtime
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../botr-faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Book of the Runtime FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro-to-clr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to the Common Language Runtime
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../garbage-collection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Garbage Collection Design
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../threading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Threading
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../type-system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type System
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../type-loader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type Loader
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../method-descriptor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Method Descriptor
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../virtual-stub-dispatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Stub Dispatch
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../stackwalking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stack Walking
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../corelib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System.Private.CoreLib and calling into the runtime
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dac-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Access Component (DAC) Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../profiling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../profilability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Implementing Profilability
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What Every Dev needs to Know About Exceptions in the Runtime
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../readytorun-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReadyToRun Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../clr-abi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLR ABI
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../xplat-minidump-generation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cross-platform Minidumps
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mixed-mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mixed Mode Assemblies
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide-for-porting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guide For Porting
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../vectors-and-intrinsics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vectors and Intrinsics
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ilc-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ILC Compiler Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../managed-type-system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managed Type System Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../r2r-perfmap-format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ready to run PerfMap format
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ReadyToRun File Format
  </span>
  

      </a>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../shared-generics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shared Generics Design
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  
    
      
    
    <a href="https://github.com/dotnet/runtime/blob/main/docs/design/coreclr/botr/readytorun-format.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="readytorun-file-format">ReadyToRun File Format</h1>
<p>Revisions:
* 1.1 - <a href="https://github.com/jkotas">Jan Kotas</a> - 2015
* 3.1 - <a href="https://github.com/trylek">Tomas Rylek</a> - 2019
* 4.1 - <a href="https://github.com/trylek">Tomas Rylek</a> - 2020
* 5.3 - <a href="https://github.com/trylek">Tomas Rylek</a> - 2021
* 5.4 - <a href="https://github.com/davidwrighton">David Wrighton</a> - 2021
* 6.3 - <a href="https://github.com/davidwrighton">David Wrighton</a> - 2022</p>
<h1 id="introduction">Introduction</h1>
<p>This document describes ReadyToRun format 3.1 implemented in CoreCLR as of June 2019 and not yet
implemented proposed extensions 4.1 for the support of composite R2R file format.
<strong>Composite R2R file format</strong> has basically the same structure as the traditional R2R file format
defined in earlier revisions except that the output file represents a larger number of input MSIL
assemblies compiled together as a logical unit.</p>
<h1 id="pe-headers-and-cli-headers">PE Headers and CLI Headers</h1>
<p><strong>Single-file ReadyToRun images</strong> conform to CLI file format as described in ECMA-335
with the following customizations:</p>
<ul>
<li>The PE file is always platform specific</li>
<li>CLI Header Flags field has set <code>COMIMAGE_FLAGS_IL_LIBRARY</code> (0x00000004) bit set</li>
<li>CLI Header <code>ManagedNativeHeader</code> points to READYTORUN_HEADER</li>
</ul>
<p>The COR header and ECMA 335 metadata pointed to by the COM descriptor data directory item
in the COFF header represent a full copy of the input IL and MSIL metadata it was generated from.</p>
<p><strong>Composite R2R files</strong> currently conform to Windows PE executable file format as the
native envelope. Moving forward we plan to gradually add support for platform-native
executable formats (ELF on Linux, MachO on OSX) as the native envelopes. There is a
global CLI / COR header in the file, but it only exists to facilitate pdb generation, and does
not participate in any usages by the CoreCLR runtime. The ReadyToRun header structure is pointed to
by the well-known export symbol <code>RTR_HEADER</code> and has the <code>READYTORUN_FLAG_COMPOSITE</code> flag set.</p>
<p>Input MSIL metadata and IL streams can be either embedded in the composite R2R file or left
as separate files on disk. In case of embedded MSIL, the "actual" metadata for the individual
component assemblies is accessed via the R2R section <code>ComponentAssemblies</code>.</p>
<p><strong>Standalone MSIL files</strong> used as the source of IL and metadata for composite R2R executables
without MSIL embedding are copied to the output folder next to the composite R2R executable
and are rewritten by the compiler to include a formal ReadyToRun header with forwarding
information pointing to the owner composite R2R executable (section <code>OwnerCompositeExecutable</code>).</p>
<h1 id="additions-to-the-debug-directory">Additions to the debug directory</h1>
<p>Currently shipping PE envelopes - both single-file and composite - can contain records for additional
debug information in the debug directory. One such entry specific to R2R images is the one for R2R PerfMaps.
The format of the auxiliary file is described <a href="../r2r-perfmap-format/">R2R perfmap format</a> and the corresponding
debug directory entry is described in <a href="../../../design/specs/PE-COFF.md#r2r-perfmap-debug-directory-entry-type-21">PE COFF</a>.</p>
<h2 id="future-improvements">Future Improvements</h2>
<p>The limitations of the current format are:</p>
<ul>
<li>
<p><strong>Type loading from IL metadata</strong>: All types are built from IL metadata at runtime currently.
  It is bloating the size - prevents stripping full metadata from the image, and fragile -
  assumes fixed field layout algorithm. A new section with compact type layout description
  optimized for runtime type loading is needed to address it. (Similar concept as CTL.)</p>
</li>
<li>
<p><strong>Debug info size</strong>: The debug information is unnecessarily bloating the image. This solution was
  chosen for compatibility with the current desktop/CoreCLR debugging pipeline. Ideally, the
  debug information should be stored in separate file.</p>
</li>
</ul>
<h1 id="structures">Structures</h1>
<p>The structures and accompanying constants are defined in the
<a href="https://github.com/dotnet/runtime/blob/main/src/coreclr/inc/readytorun.h">readytorun.h</a>
header file.
Basically the entire R2R executable image is addressed through the READYTORUN_HEADER singleton
pointed to by the well-known export RTR_HEADER in the export section of the native executable
envelope.</p>
<p>For single-file R2R executables, there's just one header representing all image sections.
For composite and single exe, the global <code>READYTORUN_HEADER</code> includes a section of the type
<code>ComponentAssemblies</code> representing the component assemblies comprising the composite
R2R image. This table is parallel to (it used the same indexing as) the table
<code>READYTORUN_MANIFEST_METADATA</code>. Each <code>READYTORUN_SECTION_ASSEMBLIES_ENTRY</code> record points
to a <code>READYTORUN_CORE_HEADER</code> variable-length structure representing sections specific to the
particular assembly.</p>
<h2 id="readytorun_header">READYTORUN_HEADER</h2>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">READYTORUN_HEADER</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">                   </span><span class="n">Signature</span><span class="p">;</span><span class="w">      </span><span class="c1">// READYTORUN_SIGNATURE</span>
<span class="w">    </span><span class="n">USHORT</span><span class="w">                  </span><span class="n">MajorVersion</span><span class="p">;</span><span class="w">   </span><span class="c1">// READYTORUN_VERSION_XXX</span>
<span class="w">    </span><span class="n">USHORT</span><span class="w">                  </span><span class="n">MinorVersion</span><span class="p">;</span>

<span class="w">    </span><span class="n">READYTORUN_CORE_HEADER</span><span class="w">  </span><span class="n">CoreHeader</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="readytorun_headersignature">READYTORUN_HEADER::Signature</h3>
<p>Always set to 0x00525452 (ASCII encoding for RTR). The signature can be used to distinguish
ReadyToRun images from other CLI images with ManagedNativeHeader (e.g. NGen images).</p>
<h3 id="readytorun_headermajorversionminorversion">READYTORUN_HEADER::MajorVersion/MinorVersion</h3>
<p>The current format version is 3.1. MajorVersion increments are meant for file format breaking changes.
MinorVersion increments are meant to compatible file format changes.</p>
<p><strong>Example</strong>: Assume the highest version supported by the runtime is 2.3. The runtime should be able to
successfully execute native code from images of version 2.9. The runtime should refuse to execute
native code from image of version 3.0.</p>
<h2 id="readytorun_core_header">READYTORUN_CORE_HEADER</h2>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">READYTORUN_CORE_HEADER</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">                   </span><span class="n">Flags</span><span class="p">;</span><span class="w">          </span><span class="c1">// READYTORUN_FLAG_XXX</span>

<span class="w">    </span><span class="n">DWORD</span><span class="w">                   </span><span class="n">NumberOfSections</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Array of sections follows. The array entries are sorted by Type</span>
<span class="w">    </span><span class="c1">// READYTORUN_SECTION   Sections[];</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="readytorun_core_headerflags">READYTORUN_CORE_HEADER::Flags</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Flag</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_PLATFORM_NEUTRAL_SOURCE</td>
<td style="text-align: right;">0x00000001</td>
<td style="text-align: left;">Set if the original IL image was platform neutral. The platform neutrality is part of assembly name. This flag can be used to reconstruct the full original assembly name.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_COMPOSITE</td>
<td style="text-align: right;">0x00000002</td>
<td style="text-align: left;">The image represents a composite R2R file resulting from a combined compilation of a larger number of input MSIL assemblies.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_PARTIAL</td>
<td style="text-align: right;">0x00000004</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_NONSHARED_PINVOKE_STUBS</td>
<td style="text-align: right;">0x00000008</td>
<td style="text-align: left;">PInvoke stubs compiled into image are non-shareable (no secret parameter)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_EMBEDDED_MSIL</td>
<td style="text-align: right;">0x00000010</td>
<td style="text-align: left;">Input MSIL is embedded in the R2R image.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_COMPONENT</td>
<td style="text-align: right;">0x00000020</td>
<td style="text-align: left;">This is a component assembly of a composite R2R image</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_MULTIMODULE_VERSION_BUBBLE</td>
<td style="text-align: right;">0x00000040</td>
<td style="text-align: left;">This R2R module has multiple modules within its version bubble (For versions before version 6.3, all modules are assumed to possibly have this characteristic)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FLAG_UNRELATED_R2R_CODE</td>
<td style="text-align: right;">0x00000080</td>
<td style="text-align: left;">This R2R module has code in it that would not be naturally encoded into this module</td>
</tr>
</tbody>
</table>
<h2 id="readytorun_section">READYTORUN_SECTION</h2>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">READYTORUN_SECTION</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">                   </span><span class="n">Type</span><span class="p">;</span><span class="w">           </span><span class="c1">// READYTORUN_SECTION_XXX</span>
<span class="w">    </span><span class="n">IMAGE_DATA_DIRECTORY</span><span class="w">    </span><span class="n">Section</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>The <code>READYTORUN_CORE_HEADER</code> structure is immediately followed by an array of <code>READYTORUN_SECTION</code> records
representing the individual R2R sections. Number of elements in the array is <code>READYTORUN_HEADER::NumberOfSections</code>.
Each record contains section type and its location within the binary. The array is sorted by section type
to allow binary searching.</p>
<p>This setup allows adding new or optional section types, and obsoleting existing section types, without
file format breaking changes. The runtime is not required to understand all section types in order to load
and execute the ready to run file.</p>
<p>The following section types are defined and described later in this document:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">ReadyToRunSectionType</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Scope (component assembly / entire image)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">CompilerIdentifier</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">Image</td>
</tr>
<tr>
<td style="text-align: left;">ImportSections</td>
<td style="text-align: right;">101</td>
<td style="text-align: left;">Image</td>
</tr>
<tr>
<td style="text-align: left;">RuntimeFunctions</td>
<td style="text-align: right;">102</td>
<td style="text-align: left;">Image</td>
</tr>
<tr>
<td style="text-align: left;">MethodDefEntryPoints</td>
<td style="text-align: right;">103</td>
<td style="text-align: left;">Assembly</td>
</tr>
<tr>
<td style="text-align: left;">ExceptionInfo</td>
<td style="text-align: right;">104</td>
<td style="text-align: left;">Assembly</td>
</tr>
<tr>
<td style="text-align: left;">DebugInfo</td>
<td style="text-align: right;">105</td>
<td style="text-align: left;">Assembly</td>
</tr>
<tr>
<td style="text-align: left;">DelayLoadMethodCallThunks</td>
<td style="text-align: right;">106</td>
<td style="text-align: left;">Assembly</td>
</tr>
<tr>
<td style="text-align: left;">~~AvailableTypes~~</td>
<td style="text-align: right;">107</td>
<td style="text-align: left;">(obsolete - used by an older format)</td>
</tr>
<tr>
<td style="text-align: left;">AvailableTypes</td>
<td style="text-align: right;">108</td>
<td style="text-align: left;">Assembly</td>
</tr>
<tr>
<td style="text-align: left;">InstanceMethodEntryPoints</td>
<td style="text-align: right;">109</td>
<td style="text-align: left;">Image</td>
</tr>
<tr>
<td style="text-align: left;">InliningInfo</td>
<td style="text-align: right;">110</td>
<td style="text-align: left;">Assembly (added in V2.1)</td>
</tr>
<tr>
<td style="text-align: left;">ProfileDataInfo</td>
<td style="text-align: right;">111</td>
<td style="text-align: left;">Image (added in V2.2)</td>
</tr>
<tr>
<td style="text-align: left;">ManifestMetadata</td>
<td style="text-align: right;">112</td>
<td style="text-align: left;">Image (added in V2.3)</td>
</tr>
<tr>
<td style="text-align: left;">AttributePresence</td>
<td style="text-align: right;">113</td>
<td style="text-align: left;">Assembly (added in V3.1)</td>
</tr>
<tr>
<td style="text-align: left;">InliningInfo2</td>
<td style="text-align: right;">114</td>
<td style="text-align: left;">Image (added in V4.1)</td>
</tr>
<tr>
<td style="text-align: left;">ComponentAssemblies</td>
<td style="text-align: right;">115</td>
<td style="text-align: left;">Image (added in V4.1)</td>
</tr>
<tr>
<td style="text-align: left;">OwnerCompositeExecutable</td>
<td style="text-align: right;">116</td>
<td style="text-align: left;">Image (added in V4.1)</td>
</tr>
<tr>
<td style="text-align: left;">PgoInstrumentationData</td>
<td style="text-align: right;">117</td>
<td style="text-align: left;">Image (added in V5.2)</td>
</tr>
<tr>
<td style="text-align: left;">ManifestAssemblyMvids</td>
<td style="text-align: right;">118</td>
<td style="text-align: left;">Image (added in V5.3)</td>
</tr>
<tr>
<td style="text-align: left;">CrossModuleInlineInfo</td>
<td style="text-align: right;">119</td>
<td style="text-align: left;">Image (added in V6.3)</td>
</tr>
<tr>
<td style="text-align: left;">HotColdMap</td>
<td style="text-align: right;">120</td>
<td style="text-align: left;">Image (added in V8.0)</td>
</tr>
<tr>
<td style="text-align: left;">MethodIsGenericMap</td>
<td style="text-align: right;">121</td>
<td style="text-align: left;">Assembly (Added in V9.0)</td>
</tr>
<tr>
<td style="text-align: left;">EnclosingTypeMap</td>
<td style="text-align: right;">122</td>
<td style="text-align: left;">Assembly (Added in V9.0)</td>
</tr>
<tr>
<td style="text-align: left;">TypeGenericInfoMap</td>
<td style="text-align: right;">123</td>
<td style="text-align: left;">Assembly (Added in V9.0)</td>
</tr>
</tbody>
</table>
<h2 id="readytorunsectiontypecompileridentifier">ReadyToRunSectionType.CompilerIdentifier</h2>
<p>This section contains zero terminated ASCII string that identifies the compiler used to produce the
image.</p>
<p><strong>Example</strong>: <code>CoreCLR 4.6.22727.0 PROJECTK</code></p>
<h2 id="readytorunsectiontypeimportsections">ReadyToRunSectionType.ImportSections</h2>
<p>This section contains array of READYTORUN_IMPORT_SECTION structures. Each entry describes range of
slots that had to be filled with the value from outside the module (typically lazily). The initial values of
slots in each range are either zero or pointers to lazy initialization helper.</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">READYTORUN_IMPORT_SECTION</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">IMAGE_DATA_DIRECTORY</span><span class="w">    </span><span class="n">Section</span><span class="p">;</span><span class="w">            </span><span class="c1">// Section containing values to be fixed up</span>
<span class="w">    </span><span class="n">USHORT</span><span class="w">                  </span><span class="n">Flags</span><span class="p">;</span><span class="w">              </span><span class="c1">// One or more of ReadyToRunImportSectionFlags</span>
<span class="w">    </span><span class="n">BYTE</span><span class="w">                    </span><span class="n">Type</span><span class="p">;</span><span class="w">               </span><span class="c1">// One of ReadyToRunImportSectionType</span>
<span class="w">    </span><span class="n">BYTE</span><span class="w">                    </span><span class="n">EntrySize</span><span class="p">;</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">                   </span><span class="n">Signatures</span><span class="p">;</span><span class="w">         </span><span class="c1">// RVA of optional signature descriptors</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">                   </span><span class="n">AuxiliaryData</span><span class="p">;</span><span class="w">      </span><span class="c1">// RVA of optional auxiliary data (typically GC info)</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="readytorun_import_sectionsflags">READYTORUN_IMPORT_SECTIONS::Flags</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">ReadyToRunImportSectionFlags</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">ReadyToRunImportSectionFlags::None</td>
<td style="text-align: right;">0x0000</td>
<td style="text-align: left;">None</td>
</tr>
<tr>
<td style="text-align: left;">ReadyToRunImportSectionFlags::Eager</td>
<td style="text-align: right;">0x0001</td>
<td style="text-align: left;">Set if the slots in the section have to be initialized at image load time. It is used to avoid lazy initialization when it cannot be done or when it would have undesirable reliability or performance effects (unexpected failure or GC trigger points, overhead of lazy initialization).</td>
</tr>
<tr>
<td style="text-align: left;">ReadyToRunImportSectionFlags::PCode</td>
<td style="text-align: right;">0x0004</td>
<td style="text-align: left;">Section contains pointers to code</td>
</tr>
</tbody>
</table>
<h3 id="readytorun_import_sectionstype">READYTORUN_IMPORT_SECTIONS::Type</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">ReadyToRunImportSectionType</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">ReadyToRunImportSectionType::Unknown</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">The type of slots in this section is unspecified.</td>
</tr>
<tr>
<td style="text-align: left;">ReadyToRunImportSectionType::StubDispatch</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">The type of slots in this section rely on stubs for dispatch.</td>
</tr>
<tr>
<td style="text-align: left;">ReadyToRunImportSectionType::StringHandle</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">The type of slots in this section hold strings</td>
</tr>
<tr>
<td style="text-align: left;">ReadyToRunImportSectionType::ILBodyFixups</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">The type of slots in this section represent cross module IL bodies</td>
</tr>
</tbody>
</table>
<p><em>Future</em>: The section type can be used to group slots of the same type together. For example, all virtual
stub dispatch slots may be grouped together to simplify resetting of virtual stub dispatch cells into their
initial state.</p>
<h3 id="readytorun_import_sectionssignatures">READYTORUN_IMPORT_SECTIONS::Signatures</h3>
<p>This field points to array of RVAs that is parallel with the array of slots. Each RVA points to fixup
signature that contains the information required to fill the corresponding slot. The signature encoding
builds upon the encoding used for signatures in ECMA-335. The first element of the signature describes the
fixup kind, the rest of the signature varies based on the fixup kind.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">ReadyToRunFixupKind</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_ThisObjDictionaryLookup</td>
<td style="text-align: right;">0x07</td>
<td style="text-align: left;">Generic lookup using <code>this</code>; followed by the type signature and by the method signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_TypeDictionaryLookup</td>
<td style="text-align: right;">0x08</td>
<td style="text-align: left;">Type-based generic lookup for methods on instantiated types; followed by the typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_MethodDictionaryLookup</td>
<td style="text-align: right;">0x09</td>
<td style="text-align: left;">Generic method lookup; followed by the method spec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_TypeHandle</td>
<td style="text-align: right;">0x10</td>
<td style="text-align: left;">Pointer uniquely identifying the type to the runtime, followed by typespec signature (see ECMA-335)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_MethodHandle</td>
<td style="text-align: right;">0x11</td>
<td style="text-align: left;">Pointer uniquely identifying the method to the runtime, followed by method signature (see below)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_FieldHandle</td>
<td style="text-align: right;">0x12</td>
<td style="text-align: left;">Pointer uniquely identifying the field to the runtime, followed by field signature (see below)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_MethodEntry</td>
<td style="text-align: right;">0x13</td>
<td style="text-align: left;">Method entrypoint or call, followed by method signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_MethodEntry_DefToken</td>
<td style="text-align: right;">0x14</td>
<td style="text-align: left;">Method entrypoint or call, followed by methoddef token (shortcut)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_MethodEntry_RefToken</td>
<td style="text-align: right;">0x15</td>
<td style="text-align: left;">Method entrypoint or call, followed by methodref token (shortcut)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_VirtualEntry</td>
<td style="text-align: right;">0x16</td>
<td style="text-align: left;">Virtual method entrypoint or call, followed by method signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_VirtualEntry_DefToken</td>
<td style="text-align: right;">0x17</td>
<td style="text-align: left;">Virtual method entrypoint or call, followed by methoddef token (shortcut)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_VirtualEntry_RefToken</td>
<td style="text-align: right;">0x18</td>
<td style="text-align: left;">Virtual method entrypoint or call, followed by methodref token (shortcut)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_VirtualEntry_Slot</td>
<td style="text-align: right;">0x19</td>
<td style="text-align: left;">Virtual method entrypoint or call, followed by typespec signature and slot</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Helper</td>
<td style="text-align: right;">0x1A</td>
<td style="text-align: left;">Helper call, followed by helper call id (see chapter 4 Helper calls)</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_StringHandle</td>
<td style="text-align: right;">0x1B</td>
<td style="text-align: left;">String handle, followed by metadata string token</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_NewObject</td>
<td style="text-align: right;">0x1C</td>
<td style="text-align: left;">New object helper, followed by typespec  signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_NewArray</td>
<td style="text-align: right;">0x1D</td>
<td style="text-align: left;">New array helper, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_IsInstanceOf</td>
<td style="text-align: right;">0x1E</td>
<td style="text-align: left;">isinst helper, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_ChkCast</td>
<td style="text-align: right;">0x1F</td>
<td style="text-align: left;">chkcast helper, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_FieldAddress</td>
<td style="text-align: right;">0x20</td>
<td style="text-align: left;">Field address, followed by field signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_CctorTrigger</td>
<td style="text-align: right;">0x21</td>
<td style="text-align: left;">Static constructor trigger, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_StaticBaseNonGC</td>
<td style="text-align: right;">0x22</td>
<td style="text-align: left;">Non-GC static base, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_StaticBaseGC</td>
<td style="text-align: right;">0x23</td>
<td style="text-align: left;">GC static base, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_ThreadStaticBaseNonGC</td>
<td style="text-align: right;">0x24</td>
<td style="text-align: left;">Non-GC thread-local static base, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_ThreadStaticBaseGC</td>
<td style="text-align: right;">0x25</td>
<td style="text-align: left;">GC thread-local static base, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_FieldBaseOffset</td>
<td style="text-align: right;">0x26</td>
<td style="text-align: left;">Starting offset of fields for given type, followed by typespec signature. Used to address base class fragility.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_FieldOffset</td>
<td style="text-align: right;">0x27</td>
<td style="text-align: left;">Field offset, followed by field signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_TypeDictionary</td>
<td style="text-align: right;">0x28</td>
<td style="text-align: left;">Hidden dictionary argument for generic code, followed by typespec signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_MethodDictionary</td>
<td style="text-align: right;">0x29</td>
<td style="text-align: left;">Hidden dictionary argument for generic code, followed by method signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Check_TypeLayout</td>
<td style="text-align: right;">0x2A</td>
<td style="text-align: left;">Verification of type layout, followed by typespec and expected type layout descriptor</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Check_FieldOffset</td>
<td style="text-align: right;">0x2B</td>
<td style="text-align: left;">Verification of field offset, followed by field signature and expected field layout descriptor</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_DelegateCtor</td>
<td style="text-align: right;">0x2C</td>
<td style="text-align: left;">Delegate constructor, followed by method signature</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_DeclaringTypeHandle</td>
<td style="text-align: right;">0x2D</td>
<td style="text-align: left;">Dictionary lookup for method declaring type. Followed by the type signature.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_IndirectPInvokeTarget</td>
<td style="text-align: right;">0x2E</td>
<td style="text-align: left;">Target (indirect) of an inlined PInvoke. Followed by method signature.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_PInvokeTarget</td>
<td style="text-align: right;">0x2F</td>
<td style="text-align: left;">Target of an inlined PInvoke. Followed by method signature.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Check_InstructionSetSupport</td>
<td style="text-align: right;">0x30</td>
<td style="text-align: left;">Specify the instruction sets that must be supported/unsupported to use the R2R code associated with the fixup.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Verify_FieldOffset</td>
<td style="text-align: right;">0x31</td>
<td style="text-align: left;">Generate a runtime check to ensure that the field offset matches between compile and runtime. Unlike CheckFieldOffset, this will generate a runtime exception on failure instead of silently dropping the method</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Verify_TypeLayout</td>
<td style="text-align: right;">0x32</td>
<td style="text-align: left;">Generate a runtime check to ensure that the field offset matches between compile and runtime. Unlike CheckFieldOffset, this will generate a runtime exception on failure instead of silently dropping the method</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Check_VirtualFunctionOverride</td>
<td style="text-align: right;">0x33</td>
<td style="text-align: left;">Generate a runtime check to ensure that virtual function resolution has equivalent behavior at runtime as at compile time. If not equivalent, code will not be used. See <a href="virtual-override-signatures">Virtual override signatures</a> for details of the signature used.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Verify_VirtualFunctionOverride</td>
<td style="text-align: right;">0x34</td>
<td style="text-align: left;">Generate a runtime check to ensure that virtual function resolution has equivalent behavior at runtime as at compile time. If not equivalent, generate runtime failure. See <a href="virtual-override-signatures">Virtual override signatures</a> for details of the signature used.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Check_IL_Body</td>
<td style="text-align: right;">0x35</td>
<td style="text-align: left;">Check to see if an IL method is defined the same at runtime as at compile time. A failed match will cause code not to be used. See<a href="il-body-signatures">IL Body signatures</a> for details.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_Verify_IL_Body</td>
<td style="text-align: right;">0x36</td>
<td style="text-align: left;">Verify an IL body is defined the same at compile time and runtime. A failed match will cause a hard runtime failure. See<a href="il-body-signatures">IL Body signatures</a> for details.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIXUP_ModuleOverride</td>
<td style="text-align: right;">0x80</td>
<td style="text-align: left;">When or-ed to the fixup ID, the fixup byte in the signature is followed by an encoded uint with assemblyref index, either within the MSIL metadata of the master context module for the signature or within the manifest metadata R2R header table (used in cases inlining brings in references to assemblies not seen in the input MSIL).</td>
</tr>
</tbody>
</table>
<h4 id="method-signatures">Method Signatures</h4>
<p>MethodSpec signatures defined by ECMA-335 are not rich enough to describe method flavors
referenced by native code. The first element of the method signature are flags. It is followed by method
token, and additional data determined by the flags.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">ReadyToRunMethodSigFlags</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_UnboxingStub</td>
<td style="text-align: right;">0x01</td>
<td style="text-align: left;">Unboxing entrypoint of the method.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_InstantiatingStub</td>
<td style="text-align: right;">0x02</td>
<td style="text-align: left;">Instantiating entrypoint of the method does not take hidden dictionary generic argument.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_MethodInstantiation</td>
<td style="text-align: right;">0x04</td>
<td style="text-align: left;">Method instantitation. Number of instantiation arguments followed by typespec for each of them appended as additional data.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_SlotInsteadOfToken</td>
<td style="text-align: right;">0x08</td>
<td style="text-align: left;">If set, the token is slot number. Used for multidimensional array methods that do not have metadata token, and also as an optimization for stable interface methods. Cannot be combined with <code>MemberRefToken</code>.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_MemberRefToken</td>
<td style="text-align: right;">0x10</td>
<td style="text-align: left;">If set, the token is memberref token. If not set, the token is methoddef token.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_Constrained</td>
<td style="text-align: right;">0x20</td>
<td style="text-align: left;">Constrained type for method resolution. Typespec appended as additional data.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_OwnerType</td>
<td style="text-align: right;">0x40</td>
<td style="text-align: left;">Method type. Typespec appended as additional data.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_METHOD_SIG_UpdateContext</td>
<td style="text-align: right;">0x80</td>
<td style="text-align: left;">If set, update the module which is used to parse tokens before performing any token processing. A uint index into the modules table immediately follows the flags</td>
</tr>
</tbody>
</table>
<h4 id="field-signatures">Field Signatures</h4>
<p>ECMA-335 does not define field signatures that are rich enough to describe method flavors referenced
by native code. The first element of the field signature are flags. It is followed by field token, and
additional data determined by the flags.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">ReadyToRunFieldSigFlags</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">READYTORUN_FIELD_SIG_IndexInsteadOfToken</td>
<td style="text-align: right;">0x08</td>
<td style="text-align: left;">Used as an optimization for stable fields. Cannot be combined with <code>MemberRefToken</code>.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIELD_SIG_MemberRefToken</td>
<td style="text-align: right;">0x10</td>
<td style="text-align: left;">If set, the token is memberref token. If not set, the token is fielddef token.</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_FIELD_SIG_OwnerType</td>
<td style="text-align: right;">0x40</td>
<td style="text-align: left;">Field type. Typespec appended as additional data.</td>
</tr>
</tbody>
</table>
<h4 id="virtual-override-signatures">Virtual override signatures</h4>
<p>ECMA 335 does not have a natural encoding for describing an overridden method. These signatures are encoded as a ReadyToRunVirtualFunctionOverrideFlags byte, followed by a method signature representing the declaration method, a type signature representing the type which is being devirtualized, and (optionally) a method signature indicating the implementation method.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">ReadyToRunVirtualFunctionOverrideFlags</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">READYTORUN_VIRTUAL_OVERRIDE_None</td>
<td style="text-align: right;">0x00</td>
<td style="text-align: left;">No flags are set</td>
</tr>
<tr>
<td style="text-align: left;">READYTORUN_VIRTUAL_OVERRIDE_VirtualFunctionOverridden</td>
<td style="text-align: right;">0x01</td>
<td style="text-align: left;">If set, then the virtual function has an implementation, which is encoded in the optional method implementation signature.</td>
</tr>
</tbody>
</table>
<h4 id="il-body-signatures">IL Body signatures</h4>
<p>ECMA 335 does not define a format that can represent the exact implementation of a method by itself. This signature holds all of the IL of the method, the EH table, the locals table, and each token (other than type references) in those tables is replaced with an index into a local stream of signatures. Those signatures are simply verbatim copies of the needed metadata to describe MemberRefs, TypeSpecs, MethodSpecs, StandaloneSignatures and strings. All of that is bundled into a large byte array. In addition, a series of TypeSignatures follows which allow the type references to be resolved, as well as a methodreference to the uninstantiated method. Assuming all of this matches with the data that is present at runtime, the fixup is considered to be satisfied. See ReadyToRunStandaloneMetadata.cs for the exact details of the format.</p>
<h3 id="readytorun_import_sectionsauxiliarydata">READYTORUN_IMPORT_SECTIONS::AuxiliaryData</h3>
<p>For slots resolved lazily via <code>READYTORUN_HELPER_DelayLoad_MethodCall</code> helper, auxiliary data are
compressed argument maps that allow precise GC stack scanning while the helper is running. The CoreCLR runtime class <a href="https://github.com/dotnet/runtime/blob/69e114c1abf91241a0eeecf1ecceab4711b8aa62/src/coreclr/inc/gcrefmap.h#L158"><code>GCRefMapDecoder</code></a> is used to parse this information. This data would not be required for runtimes that allow conservative stack scanning.</p>
<p>The auxiliary data table contains the exact same number of GC ref map records as there are method entries in the import section. To accelerate GC ref map lookup, the auxiliary data section starts with a lookup table holding the offset of every 1024-th method in the runtime function table within the linearized GC ref map.</p>
<table>
<thead>
<tr>
<th style="text-align: right;">Offset in auxiliary data</th>
<th style="text-align: right;">Size</th>
<th style="text-align: left;">Content</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Offset to GC ref map info for method #0 relative to this byte i.e. 4 * (MethodCount / 1024 + 1)</td>
</tr>
<tr>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Offset to GC ref map info for method #1024</td>
</tr>
<tr>
<td style="text-align: right;">8</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Offset to GC ref map info for method #2048</td>
</tr>
<tr>
<td style="text-align: right;">...</td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: right;">4 * (MethodCount / 1024 + 1)</td>
<td style="text-align: right;">...</td>
<td style="text-align: left;">Serialized GC ref map info</td>
</tr>
</tbody>
</table>
<p>The GCRef map is used to encode GC type of arguments for callsites. Logically, it is a sequence <code>&lt;pos, token&gt;</code> where <code>pos</code> is
position of the reference in the stack frame and <code>token</code> is type of GC reference (one of <a href="https://github.com/dotnet/runtime/blob/69e114c1abf91241a0eeecf1ecceab4711b8aa62/src/coreclr/inc/corcompile.h#L633"><code>GCREFMAP_XXX</code></a> values):</p>
<table>
<thead>
<tr>
<th style="text-align: left;">CORCOMPILE_GCREFMAP_TOKENS</th>
<th style="text-align: right;">Value</th>
<th style="text-align: left;">Stack frame entry interpretation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">GCREFMAP_SKIP</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">Not a GC-relevant entry</td>
</tr>
<tr>
<td style="text-align: left;">GCREFMAP_REF</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">GC reference</td>
</tr>
<tr>
<td style="text-align: left;">GCREFMAP_INTERIOR</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Pointer to a GC reference</td>
</tr>
<tr>
<td style="text-align: left;">GCREFMAP_METHOD_PARAM</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">Hidden method instantiation argument to generic method</td>
</tr>
<tr>
<td style="text-align: left;">GCREFMAP_TYPE_PARAM</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Hidden type instantiation argument to generic method</td>
</tr>
<tr>
<td style="text-align: left;">GCREFMAP_VASIG_COOKIE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">VARARG signature cookie</td>
</tr>
</tbody>
</table>
<p>The position values are calculated in <code>size_t</code> aka <code>IntPtr</code> units (4 bytes for 32-bit architectures vs. 8 bytes for 64-bit architectures) starting at the first position in the transition frame that may contain GC references. For all architectures except for <strong>arm64</strong> this is the beginning of the array of spilled argument registers. On arm64 it is the offset of the <code>X8</code> register used to pass the location to be filled in with the return value by the called method.</p>
<ul>
<li>
<p>The encoding always starts at the byte boundary. The high order bit of each byte is used to signal end of the encoding stream. The last byte has the high order bit zero. It means that there are 7 useful bits in each byte.</p>
</li>
<li>
<p>"pos" is always encoded as delta from previous pos.</p>
</li>
<li>
<p>The basic encoding unit is two bits. Values 0, 1 and 2 are the common constructs (skip single slot, GC reference, interior pointer). Value 3 means that extended encoding follows.</p>
</li>
<li>
<p>The extended information is integer encoded in one or more four bit blocks. The high order bit of the four bit block is used to signal the end.</p>
</li>
<li>
<p>For x86, the encoding starts with size of the callee popped stack. The size is encoded using the same mechanism as above (two bit
basic encoding, with extended encoding for large values).</p>
</li>
</ul>
<h2 id="readytorunsectiontyperuntimefunctions">ReadyToRunSectionType.RuntimeFunctions</h2>
<p>This section contains sorted array of <code>RUNTIME_FUNCTION</code> entries that describe all code blocks in the image with pointers to their unwind info.
Despite the name, these code block might represent a method body, or it could be just a part of it (e.g. a funclet) that requires its own unwind data.
The standard Windows xdata/pdata format is used.
ARM format is used for x86 to compensate for the lack of x86 unwind info standard.
The unwind info blob is immediately followed by the GC info blob. The encoding slightly differs for amd64
which encodes an extra 4-byte representing the end RVA of the unwind info blob.</p>
<h3 id="runtime_function-x86-arm-arm64-size-8-bytes">RUNTIME_FUNCTION (x86, arm, arm64, size = 8 bytes)</h3>
<table>
<thead>
<tr>
<th style="text-align: right;">Offset</th>
<th style="text-align: right;">Size</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Unwind info start RVA</td>
</tr>
<tr>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">GC info start RVA</td>
</tr>
</tbody>
</table>
<h3 id="runtime_function-amd64-size-12-bytes">RUNTIME_FUNCTION (amd64, size = 12 bytes)</h3>
<table>
<thead>
<tr>
<th style="text-align: right;">Offset</th>
<th style="text-align: right;">Size</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Unwind info start RVA</td>
</tr>
<tr>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">Unwind info end RVA (1 plus RVA of last byte)</td>
</tr>
<tr>
<td style="text-align: right;">8</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">GC info start RVA</td>
</tr>
</tbody>
</table>
<h2 id="readytorunsectiontypemethoddefentrypoints">ReadyToRunSectionType.MethodDefEntryPoints</h2>
<p>This section contains a native format sparse array (see 4 Native Format) that maps methoddef rows to
method entrypoints. Methoddef is used as index into the array. The element of the array is index of the
method in <code>RuntimeFunctions</code>, followed by list of slots that need to be filled before the method
can start executing.</p>
<p>The index of the method is left-shifted by 1 bit with the low bit indicating whether a list of slots
to fix up follows. The list of slots is encoded as follows (same encoding as used by NGen):</p>
<div class="highlight"><pre><span></span><code>READYTORUN_IMPORT_SECTIONS absolute index
    absolute slot index
    slot index delta
    _
    slot index delta
    0
READYTORUN_IMPORT_SECTIONS index delta
    absolute slot index
    slot index delta
    _
    slot delta
    0
READYTORUN_IMPORT_SECTIONS index delta
    absolute slot index
    slot index delta
    _
    slot delta
    0
0
</code></pre></div>
<p>The fixup list is a stream of integers encoded as nibbles (1 nibble = 4 bits). 3 bits of a nibble are used to
store 3 bits of the value, and the top bit indicates if the following nibble contains rest of the value. If the
top bit in the nibble is set, then the value continues in the next nibble.</p>
<p>The section and slot indices are delta-encoded offsets from that initial absolute index.  Delta-encoded
means that the i-th value is the sum of values [1..i].</p>
<p>The list is terminated by a 0 (0 is not meaningful as valid delta).</p>
<p><strong>Note:</strong> This is a per-assembly section. In single-file R2R files, it is pointed to directly by the
main R2R header; in composite R2R files, each component module has its own entrypoint section pointed to
by the <code>READYTORUN_SECTION_ASSEMBLIES_ENTRY</code> core header structure.</p>
<h2 id="readytorunsectiontypeexceptioninfo">ReadyToRunSectionType.ExceptionInfo</h2>
<p>Exception handling information. This section contains array of
<code>READYTORUN_EXCEPTION_LOOKUP_TABLE_ENTRY</code> sorted by <code>MethodStart</code> RVA. <code>ExceptionInfo</code> is RVA of
<code>READYTORUN_EXCEPTION_CLAUSE</code> array that described the exception handling information for given
method.</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">READYTORUN_EXCEPTION_LOOKUP_TABLE_ENTRY</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w"> </span><span class="n">MethodStart</span><span class="p">;</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w"> </span><span class="n">ExceptionInfo</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">READYTORUN_EXCEPTION_CLAUSE</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">CorExceptionFlag</span><span class="w">    </span><span class="n">Flags</span><span class="p">;</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">               </span><span class="n">TryStartPC</span><span class="p">;</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">               </span><span class="n">TryEndPC</span><span class="p">;</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">               </span><span class="n">HandlerStartPC</span><span class="p">;</span>
<span class="w">    </span><span class="n">DWORD</span><span class="w">               </span><span class="n">HandlerEndPC</span><span class="p">;</span>
<span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mdToken</span><span class="w">         </span><span class="n">ClassToken</span><span class="p">;</span>
<span class="w">        </span><span class="n">DWORD</span><span class="w">           </span><span class="n">FilterOffset</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">};</span>
</code></pre></div>
<p>Same encoding is as used by NGen.</p>
<h2 id="readytorunsectiontypedebuginfo">ReadyToRunSectionType.DebugInfo</h2>
<p>This section contains information to support debugging: native offset and local variable maps.</p>
<p><strong>TODO</strong>: Document the debug info encoding. It is the same encoding as used by NGen. It should not be
required when debuggers are able to handle debug info stored separately.</p>
<h2 id="readytorunsectiontypedelayloadmethodcallthunks">ReadyToRunSectionType.DelayLoadMethodCallThunks</h2>
<p>This section marks region that contains thunks for <code>READYTORUN_HELPER_DelayLoad_MethodCall</code>
helper. It is used by debugger for step-in into lazily resolved calls. It should not be required when
debuggers are able to handle debug info stored separately.</p>
<h2 id="readytorunsectiontypeavailabletypes">ReadyToRunSectionType.AvailableTypes</h2>
<p>This section contains a native hashtable of all defined &amp; export types within the compilation module. The key is the full type name, the value is the exported type or defined type token row ID left-shifted by one and or-ed with bit 0 defining the token type:</p>
<table>
<thead>
<tr>
<th style="text-align: right;">Bit value</th>
<th style="text-align: left;">Token type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">0</td>
<td style="text-align: left;">defined type</td>
</tr>
<tr>
<td style="text-align: right;">1</td>
<td style="text-align: left;">exported type</td>
</tr>
</tbody>
</table>
<p>The version-resilient hashing algorithm used for hashing the type names is implemented in
<a href="https://github.com/dotnet/runtime/blob/69e114c1abf91241a0eeecf1ecceab4711b8aa62/src/coreclr/vm/versionresilienthashcode.cpp#L74">vm/versionresilienthashcode.cpp</a>.</p>
<p><strong>Note:</strong> This is a per-assembly section. In single-file R2R files, it is pointed to directly by the
main R2R header; in composite R2R files, each component module has its own available type section pointed to
by the <code>READYTORUN_SECTION_ASSEMBLIES_ENTRY</code> core header structure.</p>
<h2 id="readytorunsectiontypeinstancemethodentrypoints">ReadyToRunSectionType.InstanceMethodEntryPoints</h2>
<p>This section contains a native hashtable of all generic method instantiations compiled into
the R2R executable. The key is the method instance signature; the appropriate version-resilient
hash code calculation is implemented in
<a href="https://github.com/dotnet/runtime/blob/69e114c1abf91241a0eeecf1ecceab4711b8aa62/src/coreclr/vm/versionresilienthashcode.cpp#L126">vm/versionresilienthashcode.cpp</a>;
the value, represented by the <code>EntryPointWithBlobVertex</code> class, stores the method index in the
runtime function table, the fixups blob and a blob encoding the method signature.</p>
<p><strong>Note:</strong> In contrast to non-generic method entrypoints, this section is image-wide for
composite R2R images. It represents all generics needed by all assemblies within the composite
executable. As mentioned elsewhere in this document, CoreCLR runtime requires changes to
properly look up methods stored in this section in the composite R2R case.</p>
<p><strong>Note:</strong> Generic methods and non-generic methods on generic types are encoded into this table
and the runtime is expected to lookup into this table in potentially multiple modules. First the
runtime is expected to lookup into this table for the module which defines the method, then it is
expected to use the "alternate" generics location which is defined as the module which is NOT the
defining module which is the defining module of one of the generic arguments to the method. This
alternate lookup is not currently a deeply nested algorithm. If that lookup fails, then lookup
will proceed to every module which specified <code>READYTORUN_FLAG_UNRELATED_R2R_CODE</code> as a flag.</p>
<h2 id="readytorunsectiontypeinlininginfo-v21">ReadyToRunSectionType.InliningInfo (v2.1+)</h2>
<p><strong>TODO</strong>: document inlining info encoding</p>
<h2 id="readytorunsectiontypeprofiledatainfo-v22">ReadyToRunSectionType.ProfileDataInfo (v2.2+)</h2>
<p><strong>TODO</strong>: document profile data encoding</p>
<h2 id="readytorunsectiontypemanifestmetadata-v23-with-changes-for-v63">ReadyToRunSectionType.ManifestMetadata (v2.3+ with changes for v6.3+)</h2>
<p>Manifest metadata is an [ECMA-335] metadata blob containing extra reference assemblies within
the version bubble introduced by inlining on top of assembly references stored in the input MSIL.
As of R2R version 3.1, the metadata is only used for the AssemblyRef table. This is used to
translate module override indices in signatures to the actual reference modules (using either
the <code>READYTORUN_FIXUP_ModuleOverride</code> bit flag on the signature fixup byte or the
<code>ELEMENT_TYPE_MODULE_ZAPSIG</code> COR element type).</p>
<p><strong>Note:</strong> It doesn't make sense to use references to assemblies external to the version bubble
in the manifest metadata via the <code>READYTORUN_FIXUP_ModuleOverride</code> or <code>ELEMENT_TYPE_MODULE_ZAPSIG</code> concept
as there's no guarantee that their metadata token values remain constant; thus we cannot encode signatures relative to them.
However, as of R2R version 6.3, the native manifest metadata may contain tokens to be further resolved to actual
implementation assemblies.</p>
<p>The module override index translation algorithm is as follows (<strong>ILAR</strong> = <em>the number of <code>AssemblyRef</code> rows in the input MSIL</em>):</p>
<p>For R2R version 6.2 and below</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Module override index (<em>i</em>)</th>
<th style="text-align: left;">Reference assembly</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><em>i</em> = 0</td>
<td style="text-align: left;">Global context - assembly containing the signature</td>
</tr>
<tr>
<td style="text-align: left;">1 &lt;= <em>i</em> &lt;= <strong>ILAR</strong></td>
<td style="text-align: left;"><em>i</em> is the index into the MSIL <code>AssemblyRef</code> table</td>
</tr>
<tr>
<td style="text-align: left;"><em>i</em> &gt; <strong>ILAR</strong></td>
<td style="text-align: left;"><em>i</em> - <strong>ILAR</strong> - 1 is the zero-based index into the <code>AssemblyRef</code> table in the manifest metadata</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> This means that the entry corresponding to <em>i</em> = <strong>ILAR</strong> + 1 is actually undefined as it corresponds to the <code>NULL</code> entry (ROWID #0) in the manifest metadata AssemblyRef table. The first meaningful index into the manifest metadata, <em>i</em> = <strong>ILAR</strong> + 2, corresponding to ROWID #1, is historically filled in by Crossgen with the input assembly info but this shouldn't be depended upon, in fact the input assembly is useless in the manifest metadata as the module override to it can be encoded by using the special index 0.</p>
<p>For R2R version 6.3 and above
| Module override index (<em>i</em>) | Reference assembly
|:----------------------------|:------------------
| <em>i</em> = 0                     | Global context - assembly containing the signature
| 1 &lt;= <em>i</em> &lt;= <strong>ILAR</strong>        | <em>i</em> is the index into the MSIL <code>AssemblyRef</code> table
| <em>i</em> = <strong>ILAR</strong> + 1          | <em>i</em> is the index which refers to the Manifest metadata itself
| <em>i</em> &gt; <strong>ILAR</strong> + 1          | <em>i</em> - <strong>ILAR</strong> - 2 is the zero-based index into the <code>AssemblyRef</code> table in the manifest metadata</p>
<p>In addition, a ModuleRef within the module which refers to <code>System.Private.CoreLib</code> may be used to serve as the <em>ResolutionContext</em> of a <em>TypeRef</em> within the manifest metadata. This will always refer to the module which contains the <code>System.Object</code> type.</p>
<h2 id="readytorunsectiontypeattributepresence-v31">ReadyToRunSectionType.AttributePresence (v3.1+)</h2>
<p><strong>TODO</strong>: document attribute presence encoding</p>
<p><strong>Note:</strong> This is a per-assembly section. In single-file R2R files, it is pointed to directly by the
main R2R header; in composite R2R files, each component module has its own attribute presence
section pointed to by the <code>READYTORUN_SECTION_ASSEMBLIES_ENTRY</code> core header structure.</p>
<h2 id="readytorunsectiontypeinlininginfo2-v41">ReadyToRunSectionType.InliningInfo2 (v4.1+)</h2>
<p>The inlining information section captures what methods got inlined into other methods. It consists of a single <em>Native Format Hashtable</em> (described below).</p>
<p>The entries in the hashtable are lists of inliners for each inlinee. One entry in the hashtable corresponds to one inlinee. The hashtable is hashed by hashcode of the module name XORed with inlinee RID.</p>
<p>The entry of the hashtable is a counted sequence of compressed unsigned integers:</p>
<ul>
<li>RID of the inlinee shifted left by one bit. If the lowest bit is set, this is an inlinee from a foreign module. The <em>module override index</em> (as defined above) follows as another compressed unsigned integer in that case.</li>
<li>RIDs of the inliners follow. They are encoded similarly to the way the inlinee is encoded (shifted left with the lowest bit indicating foreign RID). Instead of encoding the RID directly, RID delta (the difference between the previous RID and the current RID) is encoded. This allows better integer compression.</li>
</ul>
<p>Foreign RIDs are only present if a fragile inlining was allowed at compile time.</p>
<p><strong>TODO:</strong> It remains to be seen whether <code>DelayLoadMethodCallThunks</code> and / or
<code>InliningInfo</code> also require changes specific to the composite R2R file format.</p>
<h2 id="readytorunsectiontypecomponentassemblies-v41">ReadyToRunSectionType.ComponentAssemblies (v4.1+)</h2>
<p>This image-wide section is only present in the main R2R header of composite R2R files. It is an
array of the entries <code>READYTORUN_SECTION_ASSEMBLIES_ENTRY</code> parallel to the indices in the manifest metadata
AssemblyRef table in the sense that it's a linear table where the row indices correspond to the
equivalent AssemblyRef indices. Just like in the AssemblyRef ECMA 335 table, the indexing is
1-based (the first entry in the table corresponds to index 1).</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">READYTORUN_SECTION_ASSEMBLIES_ENTRY</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">IMAGE_DATA_DIRECTORY</span><span class="w"> </span><span class="n">CorHeader</span><span class="p">;</span><span class="w">        </span><span class="c1">// Input MSIL metadata COR header (for composite R2R images with embedded MSIL metadata)</span>
<span class="w">    </span><span class="n">IMAGE_DATA_DIRECTORY</span><span class="w"> </span><span class="n">ReadyToRunHeader</span><span class="p">;</span><span class="w"> </span><span class="c1">// READYTORUN_CORE_HEADER of the assembly in question</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="readytorunsectiontypeownercompositeexecutable-v41">ReadyToRunSectionType.OwnerCompositeExecutable (v4.1+)</h2>
<p>For composite R2R executables with standalone MSIL, the MSIL files are rewritten during compilation
by receiving a formal ReadyToRun header with the appropriate signature and major / minor version
pair; in <code>Flags</code>, it has the <code>READYTORUN_FLAG_COMPONENT</code> bit set and its section list only contains
the <code>OwnerCompositeExecutable</code> section that contains a UTF-8 string encoding the file name of the
composite R2R executable this MSIL belongs to with extension (without path). Runtime uses this
information to locate the composite R2R executable with the compiled native code when loading the MSIL.</p>
<h2 id="readytorunsectiontypepgoinstrumentationdata-v52">ReadyToRunSectionType.PgoInstrumentationData (v5.2+)</h2>
<p><strong>TODO</strong>: document PGO instrumentation data</p>
<h2 id="readytorunsectiontypemanifestassemblymvids-v53">ReadyToRunSectionType.ManifestAssemblyMvids (v5.3+)</h2>
<p>This section is a binary array of 16-byte MVID records, one for each assembly in the manifest metadata.
Number of assemblies stored in the manifest metadata is equal to the number of MVID records in the array.
MVID records are used at runtime to verify that the assemblies loaded match those referenced by the
manifest metadata representing the versioning bubble.</p>
<h2 id="readytorunsectiontypecrossmoduleinlineinfo-v63">ReadyToRunSectionType.CrossModuleInlineInfo (v6.3+)</h2>
<p>The inlining information section captures what methods got inlined into other methods. It consists of a single <em>Native Format Hashtable</em> (described below).</p>
<p>The entries in the hashtable are lists of inliners for each inlinee. One entry in the hashtable corresponds to one inlinee. The hashtable is hashed with the version resilient hashcode of the uninstantiated methoddef inlinee.</p>
<p>The entry of the hashtable is a counted sequence of compressed unsigned integers which begins with an InlineeIndex which combines a 30 bit index with 2 bits of flags which how the sequence of inliners shall be parsed and what table is to be indexed into to find the inlinee.</p>
<ul>
<li>InlineeIndex</li>
<li>
<p>Index with 2 flags field in lowest 2 bits to define the inlinee</p>
<ul>
<li>If (flags &amp; 1) == 0 then index is a MethodDef RID, and if the module is a composite image, a module index of the method follows</li>
<li>If (flags &amp; 1) == 1, then index is an index into the ILBody import section</li>
<li>If (flags &amp; 2) == 0 then inliner list is:</li>
<li>Inliner RID deltas - See definition below</li>
<li>if (flags &amp; 2) == 2 then what follows is:</li>
<li>count of delta encoded indices into the ILBody import section</li>
<li>the sequence of delta encoded indices into the first import section with a type of READYTORUN_IMPORT_SECTION_TYPE_ILBODYFIXUPS</li>
<li>Inliner RID deltas - See definition below</li>
</ul>
</li>
<li>
<p>Inliner RID deltas (for multi-module version bubble images specified by the module having the READYTORUN_FLAG_MULTIMODULE_VERSION_BUBBLE flag set)</p>
</li>
<li>a sequence of inliner RID deltas with flag in the lowest bit</li>
<li>if flag is set, the inliner RID is followed by a module ID</li>
<li>otherwise the module is the same as the module of the inlinee method</li>
<li>Inliner RID deltas (for single module version bubble images)</li>
<li>a sequence of inliner RID deltas</li>
</ul>
<p>This section may be included in addition to a InliningInfo2 section.</p>
<h2 id="readytorunsectiontypehotcoldmap-v80">ReadyToRunSectionType.HotColdMap (v8.0+)</h2>
<p>In ReadyToRun 8.0+, the format supports splitting a method into hot and cold parts so that they are not located together. This hot-cold map section captures the information about how methods are split so that the runtime can locate them for various services.</p>
<p>For every method that is split, there is a single entry in the section. Each entry has two unsigned 32-bit integers. The first integer is the runtime function index of the cold part and the second integer is the runtime function index of the hot part.</p>
<p>The methods in this table are sorted by their hot part runtime function indices, which are also sorted by their cold part runtime function indices because we always emit the cold part in the same order as the hot parts, or by their RVAs because the runtime function table itself is sorted by the RVAs.</p>
<p>This section may not exist if no method is split - this happens when the <code>--hot-cold-splitting</code> flag is not specified during compilation, or the compiler decides it should not split any methods.</p>
<h2 id="readytorunsectiontypemethodisgenericmap-v90">ReadyToRunSectionType.MethodIsGenericMap (v9.0+)</h2>
<p>This optional section holds a bit vector to indicate if the MethodDefs contained within the assembly have generic parameters or not. This allows determining if a method is generic or not by querying a bit vector (which is fast, and efficient) as opposed to examining the GenericParameter table, or the signature of the Method.</p>
<p>The section begins with a single 32 bit integer indicating the number of bits in the bit vector. Following that integer is the actual bit vector of all of the data. The data is grouped into 8 bit bytes, where the least significant bit of the byte is the bit which represents the lowest MethodDef.</p>
<p>For instance, the first byte in the bit vector represents the MethodDefs 06000001 to 06000008, and the least signficant bit of that first byte is the bit representing the IsGeneric bit for MethodDef 06000001.</p>
<h2 id="readytorunsectiontypeenclosingtypemap-v90">ReadyToRunSectionType.EnclosingTypeMap (v9.0+)</h2>
<p>This optional section allows for efficient O(1) lookup from the enclosed type to the type which encloses it without requiring the binary search that is necessary if using the ECMA 335 defined NestedClass table (which encodes exactly the same information). This section may only be included in the assembly if the assembly has fewer than 0xFFFE types defined within it.</p>
<p>The structure of this section is:
A single 16 bit unsigned integer listing the count of entries in the map.
This count is followed by a 16 bit unsigned integer for each TypeDef defined in the assembly. This typedef is the RID of the enclosing type, or 0 if the typedef is not enclosed by another type.</p>
<h2 id="readytorunsectiontypetypegenericinfomap-v90">ReadyToRunSectionType.TypeGenericInfoMap (v9.0+)</h2>
<p>This optional section represents a condensed view of some generic details about types. This can make it more efficient to load types.</p>
<p>The structure of this section is:
A single 32 bit integer representing the number of entries in the map followed by a series of 4 bit entries, one per type. These 4 bit entries are grouped into bytes, where each byte holds 2 entries, and the entry in the most significant 4 bits of the byte is the entry representing a lower TypeDef RID.</p>
<p>TypeGenericInfoMap entries have 4 bits representing 3 different sets of information.</p>
<ol>
<li>What is the count of generic parameters (0, 1, 2, MoreThanTwo) (This is represented in the least significant 2 bits of the TypeGenericInfoMap entry)</li>
<li>Are there any constraints on the generic parameters? (This is the 3rd bit of the entry)</li>
<li>Do any of the generic parameters have co or contra variance? (This is the 4th bit of the entry)</li>
</ol>
<h1 id="native-format">Native Format</h1>
<p>Native format is set of encoding patterns that allow persisting type system data in a binary format that is
efficient for runtime access - both in working set and CPU cycles. (Originally designed for and extensively
used by .NET Native.)</p>
<h2 id="integer-encoding">Integer encoding</h2>
<p>Native format uses a variable length encoding scheme for signed and unsigned numbers. The low bits of
the first byte of the encoding specify the number of following bytes as follows:</p>
<ul>
<li><code>xxxxxxx0</code> (i.e. the least significant bit is 0): no more bytes follow. Shift the byte one bit right, and
  sign or zero extend for signed and unsigned number, respectively.</li>
<li><code>xxxxxx01</code>: one more byte follows. Build a 16-bit number from the two bytes read (little-endian
  order), shift it right by 2 bits, then sign or zero extend.</li>
<li><code>xxxxx011</code>: two more bytes follow. Build a 24-bit number from the three bytes read (little-endian
  order), shift it right by 3 bits, then sign or zero extend.</li>
<li><code>xxxx0111</code>: three more bytes follow. Build a 32-bit number from the four bytes read, then sign or
  zero extend</li>
<li><code>xxxx1111</code>: four more bytes follow. Discard the first byte, build the signed or unsigned number
  from the following four bytes (again little-endian order).</li>
</ul>
<p><strong>Examples</strong>:
* the unsigned number 12 (<code>0x0000000c</code>) would be expressed as the single byte <code>0x18</code>.
* The unsigned number 1000 (<code>0x000003e8</code>) would be expressed as the two bytes <code>0xa1, 0x0f</code></p>
<h2 id="sparse-array">Sparse Array</h2>
<p><strong>TODO</strong>: Document native format sparse array</p>
<h2 id="hashtable">Hashtable</h2>
<p>Conceptually, a native hash table is a header that describe the dimensions of the table, a table that maps hash values of the keys to buckets followed with a list of buckets that store the values. These three things are stored consecutively in the format.</p>
<p>To make look up fast, the number of buckets is always a power of 2. The table is simply a sequence of <code>(1 + number of buckets)</code> cells, for the first <code>(number of buckets)</code> cells, its stores the offset of the bucket list from the beginning of the whole native hash table. The last cell stores the offset to the end of the buckets.</p>
<p>Each bucket is a sequence of entries. An entry has a hash code and an offset to the object stored. The entries are sorted by hash code.</p>
<p>Physically, the header is a single byte. The most significant six bits is used to store the number of buckets in its base-2 logarithm. The remaining two bits are used for storing the entry size, as explained below:</p>
<p>Because the offsets to the bucket lists are often small numbers, the table cells are variable sized.
It could be either 1 byte, 2 bytes or 4 bytes. The three cases are described with two bits. <code>00</code> means it is one byte, <code>01</code> means it is two bytes and <code>10</code> means it is four bytes.</p>
<p>The remaining data are the entries. The entries has only the least significant byte of the hash code, followed by the offset to the actual object stored in the hash table.</p>
<p>To perform a lookup, one starts with reading the header, computing the hash code, using the number of buckets to determine the number of bits to mask away from the hash code, look it up in the table using the right pointer size, find the bucket list, find the next bucket list (or the end of the table) so that we know where to stop, search the entries in that list and then we will find the object if we have a hit, or we have a miss.</p>
<p>To enumerate all the values, simply walk from the first entry and go all the way to the end of the hash table.</p>
<p>To see this in action, we can take a look at the following example, with these objects placed in the native hash table.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Object</th>
<th style="text-align: center;">HashCode</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">P</td>
<td style="text-align: center;">0x1231</td>
</tr>
<tr>
<td style="text-align: left;">Q</td>
<td style="text-align: center;">0x1232</td>
</tr>
<tr>
<td style="text-align: left;">R</td>
<td style="text-align: center;">0x1234</td>
</tr>
<tr>
<td style="text-align: left;">S</td>
<td style="text-align: center;">0x1238</td>
</tr>
</tbody>
</table>
<p>Suppose we decided to have only two buckets, then only the least significant digit will be used to index the table, the whole hash table will look like this:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Part</th>
<th style="text-align: left;">Offset</th>
<th style="text-align: center;">Content</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Header</td>
<td style="text-align: left;">0</td>
<td style="text-align: center;">0x04</td>
<td>This is the header, the least significant bit is <code>00</code>, therefore the table cell is just one byte. The most significant six bit represents 1, which means the number of buckets is 2^1 = 2.</td>
</tr>
<tr>
<td style="text-align: left;">Table</td>
<td style="text-align: left;">1</td>
<td style="text-align: center;">0x08</td>
<td>This is the representation of the unsigned integer 4, which correspond to the offset of the bucket correspond to hash code <code>0</code>.</td>
</tr>
<tr>
<td style="text-align: left;">Table</td>
<td style="text-align: left;">2</td>
<td style="text-align: center;">0x14</td>
<td>This is the representation of the unsigned integer 10, which correspond to the offset of the bucket correspond to hash code <code>1</code>.</td>
</tr>
<tr>
<td style="text-align: left;">Table</td>
<td style="text-align: left;">3</td>
<td style="text-align: center;">0x18</td>
<td>This is the representation of the unsigned integer 12, which correspond to the offset of the end of the whole hash table.</td>
</tr>
<tr>
<td style="text-align: left;">Bucket1</td>
<td style="text-align: left;">4</td>
<td style="text-align: center;">0x32</td>
<td>This is the least significant byte of the hash code of P</td>
</tr>
<tr>
<td style="text-align: left;">Bucket1</td>
<td style="text-align: left;">5</td>
<td style="text-align: center;">P</td>
<td>This should be the offset to the object P</td>
</tr>
<tr>
<td style="text-align: left;">Bucket1</td>
<td style="text-align: left;">6</td>
<td style="text-align: center;">0x34</td>
<td>This is the least significant byte of the hash code of Q</td>
</tr>
<tr>
<td style="text-align: left;">Bucket1</td>
<td style="text-align: left;">7</td>
<td style="text-align: center;">Q</td>
<td>This should be the offset to the object Q</td>
</tr>
<tr>
<td style="text-align: left;">Bucket1</td>
<td style="text-align: left;">8</td>
<td style="text-align: center;">0x38</td>
<td>This is the least significant byte of the hash code of R</td>
</tr>
<tr>
<td style="text-align: left;">Bucket1</td>
<td style="text-align: left;">9</td>
<td style="text-align: center;">R</td>
<td>This should be the offset to the object R</td>
</tr>
<tr>
<td style="text-align: left;">Bucket2</td>
<td style="text-align: left;">10</td>
<td style="text-align: center;">0x31</td>
<td>This is the least significant byte of the hash code of S</td>
</tr>
<tr>
<td style="text-align: left;">Bucket2</td>
<td style="text-align: left;">11</td>
<td style="text-align: center;">S</td>
<td>This should be the offset to the object S</td>
</tr>
</tbody>
</table>
<h1 id="helper-calls">Helper calls</h1>
<p>List of helper calls supported by READYTORUN_FIXUP_Helper:</p>
<div class="highlight"><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="nc">ReadyToRunHelper</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Invalid</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Not a real helper - handle to current module passed to delay load helpers.</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Module</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GSCookie</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span>

<span class="w">    </span><span class="c1">//</span>
<span class="w">    </span><span class="c1">// Delay load helpers</span>
<span class="w">    </span><span class="c1">//</span>

<span class="w">    </span><span class="c1">// All delay load helpers use custom calling convention:</span>
<span class="w">    </span><span class="c1">// - scratch register - address of indirection cell. 0 = address is inferred from callsite.</span>
<span class="w">    </span><span class="c1">// - stack - section index, module handle</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_DelayLoad_MethodCall</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span>

<span class="w">    </span><span class="n">READYTORUN_HELPER_DelayLoad_Helper</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x10</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_DelayLoad_Helper_Obj</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="mh">0x11</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_DelayLoad_Helper_ObjObj</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// JIT helpers</span>

<span class="w">    </span><span class="c1">// Exception handling helpers</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Throw</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="mh">0x20</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Rethrow</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x21</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Overflow</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x22</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_RngChkFail</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="mh">0x23</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_FailFast</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x24</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_ThrowNullRef</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mh">0x25</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_ThrowDivZero</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mh">0x26</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Write barriers</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_WriteBarrier</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mh">0x30</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckedWriteBarrier</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x31</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_ByRefWriteBarrier</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="mh">0x32</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Array helpers</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Stelem_Ref</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="mh">0x38</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Ldelema_Ref</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="mh">0x39</span><span class="p">,</span>

<span class="w">    </span><span class="n">READYTORUN_HELPER_MemSet</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x40</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_MemCpy</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x41</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Get string handle lazily</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GetString</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="mh">0x50</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Used by /Tuning for Profile optimizations</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LogMethodEnter</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mh">0x51</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Reflection helpers</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GetRuntimeTypeHandle</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="mh">0x54</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GetRuntimeMethodHandle</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x55</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GetRuntimeFieldHandle</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mh">0x56</span><span class="p">,</span>

<span class="w">    </span><span class="n">READYTORUN_HELPER_Box</span><span class="w">                       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x58</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Box_Nullable</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mh">0x59</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Unbox</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="mh">0x5A</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Unbox_Nullable</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mh">0x5B</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_NewMultiDimArr</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mh">0x5C</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Helpers used with generic handle lookup cases</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_NewObject</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="mh">0x60</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_NewArray</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x61</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckCastAny</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="mh">0x62</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckInstanceAny</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x63</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GenericGcStaticBase</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x64</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GenericNonGcStaticBase</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mh">0x65</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GenericGcTlsBase</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x66</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_GenericNonGcTlsBase</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x67</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_VirtualFuncPtr</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mh">0x68</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_IsInstanceOfException</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="mh">0x69</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_NewMaybeFrozenArray</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="mh">0x6A</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_NewMaybeFrozenObject</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="mh">0x6B</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Long mul/div/shift ops</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LMul</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC0</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LMulOfv</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC1</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_ULMulOvf</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC2</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LDiv</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC3</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LMod</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC4</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_ULDiv</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC5</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_ULMod</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC6</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LLsh</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC7</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LRsh</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC8</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_LRsz</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xC9</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Lng2Dbl</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="mh">0xCA</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_ULng2Dbl</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xCB</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// 32-bit division helpers</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Div</span><span class="w">                       </span><span class="o">=</span><span class="w"> </span><span class="mh">0xCC</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Mod</span><span class="w">                       </span><span class="o">=</span><span class="w"> </span><span class="mh">0xCD</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_UDiv</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xCE</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_UMod</span><span class="w">                      </span><span class="o">=</span><span class="w"> </span><span class="mh">0xCF</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Floating point conversions</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2Int</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD0</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2IntOvf</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD1</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2Lng</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD2</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2LngOvf</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD3</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2UInt</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD4</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2UIntOvf</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD5</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2ULng</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD6</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_Dbl2ULngOvf</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="mh">0xD7</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// Floating point ops</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_DblRem</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mh">0xE0</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_FltRem</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="mh">0xE1</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_DblRound</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xE2</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_FltRound</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0xE3</span><span class="p">,</span>

<span class="cp">#ifndef _TARGET_X86_</span>
<span class="w">    </span><span class="c1">// Personality routines</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_PersonalityRoutine</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="mh">0xF0</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_PersonalityRoutineFilterFunclet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0xF1</span><span class="p">,</span>
<span class="cp">#endif</span>

<span class="w">    </span><span class="c1">//</span>
<span class="w">    </span><span class="c1">// Deprecated/legacy</span>
<span class="w">    </span><span class="c1">//</span>

<span class="w">    </span><span class="c1">// JIT32 x86-specific write barriers</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_WriteBarrier_EAX</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x100</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_WriteBarrier_EBX</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x101</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_WriteBarrier_ECX</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x102</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_WriteBarrier_ESI</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x103</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_WriteBarrier_EDI</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x104</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_WriteBarrier_EBP</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mh">0x105</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckedWriteBarrier_EAX</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x106</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckedWriteBarrier_EBX</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x107</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckedWriteBarrier_ECX</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x108</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckedWriteBarrier_ESI</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x109</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckedWriteBarrier_EDI</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x10A</span><span class="p">,</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_CheckedWriteBarrier_EBP</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="mh">0x10B</span><span class="p">,</span>

<span class="w">    </span><span class="c1">// JIT32 x86-specific exception handling</span>
<span class="w">    </span><span class="n">READYTORUN_HELPER_EndCatch</span><span class="w">                  </span><span class="o">=</span><span class="w"> </span><span class="mh">0x110</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
<h1 id="references">References</h1>
<p><a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-335">ECMA-335</a></p>







  
  




  



                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../r2r-perfmap-format/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Ready to run PerfMap format">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Ready to run PerfMap format
              </div>
            </div>
          </a>
        
        
          
          <a href="../shared-generics/" class="md-footer__link md-footer__link--next" aria-label="Next: Shared Generics Design">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Shared Generics Design
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
in <a href="https://github.com/jurakovic/runtime" target="_blank" rel="noopener">jurakovic/runtime</a>
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/jurakovic/runtime" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/dotnet/runtime" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.view", "navigation.footer"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>